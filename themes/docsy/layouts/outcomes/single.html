{{ define "outcomefinder" }}
{{ if eq .context.Parent .context.FirstSection }}
{{ .scratch.Set "outcome" .context }}
{{ printf "SCRATCH %s" (.scratch.Get "outcome")}}
{{ else }}
{{ template "outcomefinder" (dict "context" .context.Parent "scratch" .scratch) }}
{{ end }}
{{ end }}


{{ define "main"}}

{{ template "outcomefinder" (dict "context" . "scratch" $.Scratch) }}
{{ $outcome := $.Scratch.Get "outcome" }}

<div class="td-content">
  <div class='container'>
    <br/>
    <div class="row flex-xl-nowrap container mx-auto">
      <div class="col-12 col-md-12 col-lg-12 col-xl-12 d-print-none">
        {{ partial "version-banner.html" . }}
        {{ if not .Site.Params.ui.breadcrumb_disable }}{{ partial "breadcrumb.html" . }}{{ end }}
        <h1>{{ $outcome.Title }}</h1>
      </div>
    </div>
    <div class="row flex-xl-nowrap container mx-auto">
      <div class="col-14 col-md-3 col-lg-3 col-xl-3 td-sidebar d-print-none" style="padding: 0.7rem 0.7rem;">
        {{ partial "sidebar-outcomes.html" (dict "context" . "outcome" $outcome) }}
      </div>
      <div class="col-14 col-md-8 col-lg-8 col-xl-8 d-print-none">
        {{ if ne $outcome .CurrentSection }}
        <h3>{{ .Title }}</h3>
        {{ end }}
        {{ .Content }}
        {{ partial "pager.html" . }}
      </div>
      <div class="col-14 col-md-3 col-lg-3 col-xl-3 d-print-none">
        <div class="td-toc" style="padding-top: 0px;">
        {{ with .TableOfContents }}
        <h5 class="mb-4">On This Page</h5>
        {{ . }}
        {{ end }}
        </div>

        {{ if .Params.related }}
        <div class="related-reading pl-3 pr-3 pt-2 pb-2">
          <p class="text-uppercase font-weight-bold">Related</p>
          <ul>
            {{ range .Params.related }}
            {{ with $.GetPage . }}
            <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
            {{ end }}
            {{ end }}
          </ul>
        </div>
        {{ end }}
      </div>
    </div>
  </div
></div>
{{ end }}
